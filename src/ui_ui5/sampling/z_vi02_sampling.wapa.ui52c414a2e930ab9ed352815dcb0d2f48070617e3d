/*                                                                                                                                                                                                                                                             
To use APC handling in the dialogs, do following steps:                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
1. Implement following methods in your Controller                                                                                                                                                                                                              
sap.ui.define([                                                                                                                                                                                                                                                
        "../libs/SWL_Utils"                                                                                                                                                                                                                                    
]                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
	    onInit: function () {                                                                                                                                                                                                                                     
			Swisslog.initAPCConnection(this, 'handleAPCMessage');                                                                                                                                                                                                       
                ...                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;               
        handleAPCMessage: function handleAPCMessage(oEvent) {                                                                                                                                                                                                  
                //do everything - handle response                                                                                                                                                                                                              
        },                                                                                                                                                                                                                                                     
	&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                            
        }                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
*/                                                                                                                                                                                                                                                             
&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                                                             
var Swisslog = (function () {                                                                                                                                                                                                                                  
    "use strict";                                                                                                                                                                                                                                              
    var uiFieldName;                                                                                                                                                                                                                                           
    var Controller;                                                                                                                                                                                                                                            
    var viewFolder;                                                                                                                                                                                                                                            
    return {                                                                                                                                                                                                                                                   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
        initAPCConnection: function(controller, handleMessage) {                                                                                                                                                                                               
            Controller = controller;                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
            //  Check if WebSockets are supported                                                                                                                                                                                                              
           if (!sap.ui.Device.support.websocket) {                                                                                                                                                                                                             
                sap.m.MessageBox.show(                                                                                                                                                                                                                         
                    "Your SAPUI5 version does not support WebSockets. Use version ...", {                                                                                                                                                                      
                    icon: sap.m.MessageBox.Icon.ERROR,                                                                                                                                                                                                         
                    title: "WebSocket not supported",                                                                                                                                                                                                          
                    actions: [sap.m.MessageBox.Action.OK]                                                                                                                                                                                                      
                }                                                                                                                                                                                                                                              
                );                                                                                                                                                                                                                                             
                return;                                                                                                                                                                                                                                        
            }                                                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
            // Establish WebSocket Connection using protocol SAP Push Channel Protocol (PCP)                                                                                                                                                                   
            this.oWs = new sap.ui.core.ws.SapPcpWebSocket('/sap/bc/apc/sap/zswl_apc_echo', sap.ui.core.ws.SapPcpWebSocket.SUPPORTED_PROTOCOLS.v10);                                                                                                            
            //var info = this.whNumber.concat(this.workstation);                                                                                                                                                                                               
            //this.oWs.send('748574584');                                                                                                                                                                                                                      
            // Register Callback Functions on WebSocket Events                                                                                                                                                                                                 
            this.oWs.attachOpen(function (e) {                                                                                                                                                                                                                 
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            this.oWs.attachMessage(function (oEvent) {                                                                                                                                                                                                         
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                               
                Controller[handleMessage](oEvent);                                                                                                                                                                                                             
&nbsp;                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            this.oWs.attachClose(function (e) {                                                                                                                                                                                                                
                sap.m.MessageBox.show(                                                                                                                                                                                                                         
                    "Connection is not established !", {                                                                                                                                                                                                       
                    icon: sap.m.MessageBox.Icon.ERROR,                                                                                                                                                                                                         
                    title: "WebSocket connection closed",                                                                                                                                                                                                      
                    actions: [sap.m.MessageBox.Action.OK]                                                                                                                                                                                                      
                }                                                                                                                                                                                                                                              
                );                                                                                                                                                                                                                                             
            });                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
            this.oWs.attachError(function (e) {                                                                                                                                                                                                                
            });                                                                                                                                                                                                                                                
            },                                                                                                                                                                                                                                                 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                       
            setQtyUIFieldName: function(uiField) {&nbsp;                                                                                                                                                                                                       
                    uiFieldName = uiField;                                                                                                                                                                                                                     
            },                                                                                                                                                                                                                                                 
            getQtyUIFieldName: function() {                                                                                                                                                                                                                    
                    return uiFieldName;                                                                                                                                                                                                                        
            },                                                                                                                                                                                                                                                 
            alert: function()  { alert(Swisslog);&nbsp;                                                                                                                                                                                                        
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
    }                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
}) ();                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               